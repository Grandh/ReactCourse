<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>拖拽</title>
		<script src="./js/browser.js" charset="utf-8"></script>
		<script src="./js/react.development.js" charset="utf-8"></script>
        <script src="./js/react-dom.development.js" charset="utf-8"></script>
        <script src="./js/jquery.js" charset="utf-8"></script>
        <style type="text/css">
            .box{
                width: 200px;
                height: 200px;
                background: #cccccc;
                position: absolute;
            }
        </style>
		<script type="text/babel">

			class Drag extends React.Component{
                constructor(...args){
                    super(...args);
                    this.state = {x:0,y:0};
                }

                componentDidMount(){
                    
                }
                fn(ev){
                    var disX = ev.pageX - this.state.x;
                    var disY = ev.pageY - this.state.y;

                    // $()
                    var _this = this;
                    document.onmousemove = function(ev){
                        _this.setState({
                            x:ev.pageX-disX,
                            y:ev.pageY-disY,
                        });
                        console.log(disX);
                    }

                    document.onmouseup=function(){
                        document.onmousemove=null;
                        document.onmouseup = null;
                    }
                    
                }
                render(){
                    return <div style={{left:this.state.x+'px',top:this.state.y+'px'}}
                    className="box" onMouseDown={this.fn.bind(this)}
                    >1111</div>;
                }
			}

            $(function() {
                ReactDOM.render(
                    <Drag/>,
                    $('blue-view')[0]
                )
            });
		</script>

	</head>
	<body>
        <blue-view></blue-view>
	</body>
</html>

		

